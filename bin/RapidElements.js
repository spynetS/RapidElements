(()=>{var d=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);function A(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="";for(let l=0;l<t;l++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}var N=d(()=>{});var p,M=d(()=>{p=class{constructor(){this.self="asd",this.props={},this.className="Component"}onComponentLoad(){}getChild(e){return document.querySelectorAll(`[child-id="RAPID${this.self+e}"]`)[0]}getChildInstance(e){let n=document.querySelectorAll(`[child-id="RAPID${this.self+e}"]`)[0];if(n!==void 0)return getInstance(n)}copyAttributes(e,n){Array.from(n.attributes).forEach(l=>{e.setAttribute(l.name,l.value)})}setState(e){for(let n in e)this.state[n]!==void 0&&(this.state[n]=e[n]);this.rerender()}rerender(){let e=new Comp;e.html=this.template,e.className=this.className,e.props=this.props,e.instanceName=this.self,e.replaceChildId(),e.replaceProps(),e.replaceSelf(),e.html=replaceJs(e.html);let n=document.querySelectorAll(`[instance="${this.self}"]`)[0];var l=new DOMParser().parseFromString(e.html,"text/html");let c=this;function a(s,o){for(let r=0;r<s.length;r++)c.copyAttributes(s[r],o[r]),o[r].innerHTML.includes("input")||(s[r].innerHTML=o[r].innerHTML),s[r].children.length>0&&a(s[r].children,o[r].children)}a(n.children,l.body.children),rapidRefresh()}}});function b(){let t=document.createElement("style");t.innerHTML=`
      .no-tailwind h1,
      .no-tailwind h2,
      .no-tailwind h3,
      .no-tailwind h4,
      .no-tailwind h5,
      .no-tailwind h6,
      .no-tailwind p,
      .no-tailwind div,
      .no-tailwind span,
      .no-tailwind a,
      .no-tailwind ul,
      .no-tailwind li,
      .no-tailwind table,
      .no-tailwind tr,
      .no-tailwind th,
      .no-tailwind td {
          all: revert;
          font-family: inherit;
          color: inherit;
          background-color: inherit;
      }
  `,document.head.appendChild(t)}function y(t){return t=t.replace(/^\s*######\s+(.*)$/gim,"<h6>$1</h6>"),t=t.replace(/^\s*#####\s+(.*)$/gim,"<h5>$1</h5>"),t=t.replace(/^\s*####\s+(.*)$/gim,"<h4>$1</h4>"),t=t.replace(/^\s*###\s+(.*)$/gim,"<h3>$1</h3>"),t=t.replace(/^\s*##\s+(.*)$/gim,"<h2>$1</h2>"),t=t.replace(/^\s*#\s+(.*)$/gim,"<h1>$1</h1>"),t=t.replace(/\*\*(.*?)\*\*/gim,"<b>$1</b>"),t=t.replace(/__(.*?)__/gim,"<b>$1</b>"),t=t.replace(/\*(.*?)\*/gim,"<i>$1</i>"),t=t.replace(/_(.*?)_/gim,"<i>$1</i>"),t=t.replace(/\[(.*?)\]\((.*?)\)/gim,'<a href="$2">$1</a>'),t=t.replace(/^\s*\* (.*)/gim,`<ul>
<li>$1</li>
</ul>`),t=t.replace(/^\s*\n\*\s+(.*)/gim,`<ul>
<li>$1</li>
</ul>`),t=t.replace(/^\s*\d+\.\s+(.*)/gim,`<ol>
<li>$1</li>
</ol>`),t=t.replace(/^\s*\n\d+\.\s+(.*)/gim,`<ol>
<li>$1</li>
</ol>`),t=t.replace(/^\s*\>\s+(.*)/gim,"<blockquote>$1</blockquote>"),t=t.replace(/\n$/gim,"<br />"),t.trim()}function u(){let t=document.querySelectorAll("[markdown]");for(let e=0;e<t.length;e++){let n=t[e],l=n.innerHTML;n.classList.add("no-tailwind");let c=y(l);n.innerHTML=c}}var T=d(()=>{document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[include-md]").forEach(function(e){let n=e.getAttribute("include-md");if(n){let l=new XMLHttpRequest;l.onreadystatechange=function(){this.readyState==4&&(this.status==200&&(e.innerHTML=y(this.responseText),e.classList.add("no-tailwind")),this.status==404&&(e.innerHTML="Page not found."))},l.open("GET",n,!0),l.send()}})})});var j=v((g,$)=>{N();M();T();window.Component=p;var C="{",L="}",S="{{",E="}}",f=class{constructor(){this.className="",this.name="",this.script=null,this.html=null}createScript(){if(document.querySelector(`[rapid-script="${this.getClassName()}"]`)==null){let e=document.createElement("script");e.setAttribute("rapid-script",this.getClassName()),e.textContent=this.script.innerHTML,document.body.appendChild(e)}}getClassName(e){if(this.script==null)return null;let n=this.script.innerHTML.match(/class\s+([^\s{]+)/);return n&&n.length>1?n[1]:null}},m=class{constructor(){this.instanceName,this.defintion,this.props,this.html,this.template=""}replaceProps(){try{this.props.children=this.defintion.innerHTML}catch(l){console.log(l)}try{this.html=this.html.replaceAll(`${C}children${L}`,this.defintion.innerHTML)}catch(l){console.log(l)}for(let l of Object.entries(this.props)){let c=l[0],a=l[1];if(c==="child-id"){var e=document.createElement("div");e.innerHTML=this.html;var n=e.firstElementChild;e.setAttribute("child-id",a),this.html=e.outerHTML}else this.html=this.html.replaceAll(`${C}${c}${L}`,a)}}replaceSelf(){this.html=this.html.replaceAll("self.",this.instanceName+"."),this.html=this.html.replaceAll("this.",this.instanceName+".")}replaceChildId(){var e=new DOMParser,n=e.parseFromString(this.html,"text/html"),l=n.querySelectorAll("[child-id]");for(let c=0;c<l.length;c++){let a=l[c].getAttribute("child-id");a.includes("RAPID")||l[c].setAttribute("child-id","RAPIDself"+a)}this.html=n.body.innerHTML}setInstance(){if(this.instanceName=A(10),this.html!=null){var e=new DOMParser,n=e.parseFromString(this.html,"text/html");n.body.firstElementChild.setAttribute("instance",this.instanceName),this.html=n.body.innerHTML}}};window.isInsideCompontent=(t,e,n)=>{let l=t;for(;l;){if(l.getAttribute(e)===n)return!0;l=l.parentElement}return!1};window.replaceComponentTagName=t=>{let e=document.querySelector(`[rapid-name="${t}"]`);replaceComponentTemplate(e)};window.replaceComponentTemplate=t=>{let e=new f;e.name=t.getAttribute("rapid-name"),e.script=t.content.querySelector("script"),e.script!==null?(e.html=t.innerHTML.replace(e.script.outerHTML,""),e.createScript()):e.html=t.innerHTML;let n=e.name,l=[],c=document.getElementsByTagName(n);for(let a=0;a<c.length;a++)if(!isInsideCompontent(c[a],"rapid-component",n)){let s=new m;s.defintion=c[a];let o=document.createElement("div");if(o.setAttribute("rapid-component",n),o.innerHTML=e.html,s.html=o.outerHTML,s.template=o.innerHTML,s.className=e.getClassName(),s.props=Array.from(c[a].attributes).reduce((r,h)=>(r[h.name]=h.value,r),{}),s.setInstance(),s.replaceChildId(),s.replaceProps(),s.replaceSelf(),s.className!=null){let r=`let ${s.instanceName} = new ${s.className}();`;r+=`${s.instanceName}.self = '${s.instanceName}';`,r+=`${s.instanceName}.props = ${JSON.stringify(s.props)};`,r+=`${s.instanceName}.onComponentLoad();`,r+=`${s.instanceName}.template = '${s.template.replaceAll(`
`,"")}';`,r+=`${s.instanceName}.className = '${s.className}';`;let h=document.createElement("script");h.setAttribute("instance",s.instanceName),h.textContent=r,document.body.appendChild(h)}c[a].outerHTML=replaceJs(s.html),l.push(s),a--}};window.replaceComponents=()=>{let t=document.getElementsByTagName("template");for(let e=t.length-1;e>=0;e--)replaceComponentTemplate(t[e])};function H(){let t=document.querySelector("[include-html]");if(t===null)return null;let e=t.getAttribute("include-html");e&&fetch(e).then(n=>{if(!n.ok)throw new Error("Network response was not ok");return n.text()}).then(n=>{t.outerHTML=n,replaceComponents(),H()}).catch(n=>{t.innerHTML="Content not found."})}window.rapidRefresh=()=>{replaceComponents()};function I(){H(),replaceComponents(),u(),b(),console.log("ehere")}window.getInstanceById=t=>{let e=document.getElementById(t);return getInstance(e)};window.getInstance=element=>{if(element.getAttribute("instance")){let instanceName=element.getAttribute("instance");if(instanceName===null&&(instanceName=element.firstElementChild.getAttribute("instance"),instanceName===null))return null;let instance=eval(`${instanceName}`);return instance}else return getInstance(element.parentElement)};window.replaceJs=html=>{let pattern=/\{{\s*.*?\s*\}}/g,matches=html.match(pattern);if(matches!=null)for(let i=0;i<matches.length;i++){let js=matches[i].replaceAll(S,"");js=js.replaceAll(E,""),js=js.replaceAll("&gt;",">"),js=js.replaceAll("&lt;","<");try{let js_value=eval(js);html=html.replaceAll(matches[i],js_value)}catch(t){html=html.replaceAll(matches[i],"undefined")}}return html};window.onload=I();window.replaceMd=u;window.Comp=m});j();})();
//# sourceMappingURL=RapidElements.js.map
