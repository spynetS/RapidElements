(()=>{var d=(e,t)=>()=>(e&&(t=e(e=0)),t);var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);function L(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="";for(let l=0;l<e;l++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var y=d(()=>{});var m,T=d(()=>{m=class{constructor(){this.self="asd",this.props={}}onComponentLoad(){}getChild(t){return document.querySelectorAll(`[child-id="RAPID${this.self+t}"]`)[0]}getChildInstance(t){let n=document.querySelectorAll(`[child-id="RAPID${this.self+t}"]`)[0];if(n!==void 0)return getInstance(n)}}});function N(){let e=document.createElement("style");e.innerHTML=`
      .no-tailwind h1,
      .no-tailwind h2,
      .no-tailwind h3,
      .no-tailwind h4,
      .no-tailwind h5,
      .no-tailwind h6,
      .no-tailwind p,
      .no-tailwind div,
      .no-tailwind span,
      .no-tailwind a,
      .no-tailwind ul,
      .no-tailwind li,
      .no-tailwind table,
      .no-tailwind tr,
      .no-tailwind th,
      .no-tailwind td {
          all: revert;
          font-family: inherit;
          color: inherit;
          background-color: inherit;
      }
  `,document.head.appendChild(e)}function H(e){return e=e.replace(/^\s*######\s+(.*)$/gim,"<h6>$1</h6>"),e=e.replace(/^\s*#####\s+(.*)$/gim,"<h5>$1</h5>"),e=e.replace(/^\s*####\s+(.*)$/gim,"<h4>$1</h4>"),e=e.replace(/^\s*###\s+(.*)$/gim,"<h3>$1</h3>"),e=e.replace(/^\s*##\s+(.*)$/gim,"<h2>$1</h2>"),e=e.replace(/^\s*#\s+(.*)$/gim,"<h1>$1</h1>"),e=e.replace(/\*\*(.*?)\*\*/gim,"<b>$1</b>"),e=e.replace(/__(.*?)__/gim,"<b>$1</b>"),e=e.replace(/\*(.*?)\*/gim,"<i>$1</i>"),e=e.replace(/_(.*?)_/gim,"<i>$1</i>"),e=e.replace(/\[(.*?)\]\((.*?)\)/gim,'<a href="$2">$1</a>'),e=e.replace(/^\s*\* (.*)/gim,`<ul>
<li>$1</li>
</ul>`),e=e.replace(/^\s*\n\*\s+(.*)/gim,`<ul>
<li>$1</li>
</ul>`),e=e.replace(/^\s*\d+\.\s+(.*)/gim,`<ol>
<li>$1</li>
</ol>`),e=e.replace(/^\s*\n\d+\.\s+(.*)/gim,`<ol>
<li>$1</li>
</ol>`),e=e.replace(/^\s*\>\s+(.*)/gim,"<blockquote>$1</blockquote>"),e=e.replace(/\n$/gim,"<br />"),e.trim()}function u(){console.log("replace md"),console.log(document.body.innerHTML);let e=document.querySelectorAll("[markdown]");console.log(e);for(let t=0;t<e.length;t++){let n=e[t],l=n.innerHTML;n.classList.add("no-tailwind"),console.log(l);let c=H(l);n.innerHTML=c}}var w=d(()=>{document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[include-md]").forEach(function(t){let n=t.getAttribute("include-md");if(n){let l=new XMLHttpRequest;l.onreadystatechange=function(){this.readyState==4&&(this.status==200&&(t.innerHTML=H(this.responseText),t.classList.add("no-tailwind")),this.status==404&&(t.innerHTML="Page not found."))},l.open("GET",n,!0),l.send()}})})});var q=I(($,M)=>{y();T();w();window.Component=m;var C="{",v="}",j="{{",_="}}",f=class{constructor(){this.className="",this.name="",this.script=null,this.html=null}createScript(){if(document.querySelector(`[rapid-script="${this.getClassName()}"]`)==null){let t=document.createElement("script");t.setAttribute("rapid-script",this.getClassName()),t.textContent=this.script.innerHTML,document.body.appendChild(t)}}getClassName(t){if(this.script==null)return null;let n=this.script.innerHTML.match(/class\s+([^\s{]+)/);return n&&n.length>1?n[1]:null}},g=class{constructor(){this.instanceName,this.defintion,this.props,this.html}replaceProps(){try{this.props.children=this.defintion.innerHTML}catch(l){console.log(l)}this.html=this.html.replaceAll(`${C}children${v}`,this.defintion.innerHTML);for(let l of Object.entries(this.props)){let c=l[0],r=l[1];if(c==="child-id"){var t=document.createElement("div");t.innerHTML=this.html;var n=t.firstElementChild;t.setAttribute("child-id",r),this.html=t.outerHTML}else this.html=this.html.replaceAll(`${C}${c}${v}`,r)}}replaceSelf(){this.html=this.html.replaceAll("self",this.instanceName)}replaceChildId(){var t=new DOMParser,n=t.parseFromString(this.html,"text/html"),l=n.querySelectorAll("[child-id]");for(let c=0;c<l.length;c++){let r=l[c].getAttribute("child-id");r.includes("RAPID")||l[c].setAttribute("child-id","RAPIDself"+r)}this.html=n.body.innerHTML}setInstance(){if(this.instanceName=L(10),this.html!=null){var t=new DOMParser,n=t.parseFromString(this.html,"text/html");n.body.firstElementChild.setAttribute("instance",this.instanceName),this.html=n.body.innerHTML}}};window.isInsideCompontent=(e,t,n)=>{let l=e;for(;l;){if(l.getAttribute(t)===n)return!0;l=l.parentElement}return!1};window.replaceComponents=()=>{var e=performance.now();let t=document.getElementsByTagName("template"),n=new Object;for(let r=t.length-1;r>=0;r--){let s=new f;s.name=t[r].getAttribute("rapid-name"),s.script=t[r].content.querySelector("script"),s.script!==null?(s.html=t[r].innerHTML.replace(s.script.outerHTML,""),s.createScript()):s.html=t[r].innerHTML,n[s.name]=s}let l=[];for(let[r,s]of Object.entries(n)){let a=document.getElementsByTagName(r);for(let o=0;o<a.length;o++)if(!isInsideCompontent(a[o],"rapid-component",r)){let h=new g;h.defintion=a[o];let p=document.createElement("div");p.innerHTML=s.html,p.setAttribute("rapid-component",r),h.html=p.outerHTML,h.className=s.getClassName(),h.props=Array.from(a[o].attributes).reduce((A,b)=>(A[b.name]=b.value,A),{}),h.setInstance(),h.replaceChildId(),h.replaceProps(),h.replaceSelf(),a[o].outerHTML=h.html,l.push(h),o--}}for(let r=l.length-1;r>=0;r--){let s=l[r];if(s.className!=null){let a=`let ${s.instanceName} = new ${s.className}();`;a+=`${s.instanceName}.self = '${s.instanceName}';`,a+=`${s.instanceName}.props = ${JSON.stringify(s.props)};`,a+=`${s.instanceName}.onComponentLoad();`;let o=document.createElement("script");o.textContent=a,document.body.appendChild(o)}}replaceJs();var c=performance.now();console.log("replace took "+(c-e)+" milliseconds.")};async function E(){let e=document.querySelector("[include-html]");if(!e)return;let t=e.getAttribute("include-html");if(t)try{let n=await fetch(t);if(!n.ok)throw new Error("Network response was not ok");let l=await n.text();e.outerHTML=l,await E()}catch{e.innerHTML="Content not found."}}async function x(){await E(),replaceComponents(),u(),N()}window.rapidRefresh=()=>{replaceComponents()};window.getInstanceById=e=>{let t=document.getElementById(e);return getInstance(t)};window.getInstance=element=>{if(element.getAttribute("instance")){let instanceName=element.getAttribute("instance");if(instanceName===null&&(instanceName=element.firstElementChild.getAttribute("instance"),instanceName===null))return null;let instance=eval(`${instanceName}`);return instance}else return getInstance(element.parentElement)};window.replaceJs=()=>{let pattern=/\{{\s*.*?\s*\}}/g,html=document.documentElement.innerHTML,matches=html.match(pattern);if(matches!=null){for(let i=0;i<matches.length;i++){let js=matches[i].replaceAll(j,"");js=js.replaceAll(_,""),js=js.replaceAll("&gt;",">"),js=js.replaceAll("&lt;","<");try{let js_value=eval(js);html=html.replaceAll(matches[i],js_value)}catch(e){html=html.replaceAll(matches[i],"undefined")}}document.documentElement.innerHTML=html}};window.onload=x();window.replaceMd=u});q();})();
//# sourceMappingURL=RapidElements.js.map
