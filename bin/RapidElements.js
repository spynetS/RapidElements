(()=>{var o=(e,t)=>()=>(e&&(t=e(e=0)),t);var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);function f(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}var g=o(()=>{});var a,$=o(()=>{a=class{constructor(){this.self="asd",this.props={}}onComponentLoad(){}getChild(t){return document.querySelectorAll(`[child-id="RAPID${this.self+t}"]`)[0]}getChildInstance(t){let n=document.querySelectorAll(`[child-id="RAPID${this.self+t}"]`)[0];if(n!==void 0)return getInstance(n)}}});function M(){let e=document.createElement("style");e.innerHTML=`
      .no-tailwind h1,
      .no-tailwind h2,
      .no-tailwind h3,
      .no-tailwind h4,
      .no-tailwind h5,
      .no-tailwind h6,
      .no-tailwind p,
      .no-tailwind div,
      .no-tailwind span,
      .no-tailwind a,
      .no-tailwind ul,
      .no-tailwind li,
      .no-tailwind table,
      .no-tailwind tr,
      .no-tailwind th,
      .no-tailwind td {
          all: revert;
          font-family: inherit;
          color: inherit;
          background-color: inherit;
      }
  `,document.head.appendChild(e)}function b(e){return e=e.replace(/^###### (.*$)/gim,"<h6>$1</h6>"),e=e.replace(/^##### (.*$)/gim,"<h5>$1</h5>"),e=e.replace(/^#### (.*$)/gim,"<h4>$1</h4>"),e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/\*\*(.*?)\*\*/gim,"<b>$1</b>"),e=e.replace(/__(.*?)__/gim,"<b>$1</b>"),e=e.replace(/\*(.*?)\*/gim,"<i>$1</i>"),e=e.replace(/_(.*?)_/gim,"<i>$1</i>"),e=e.replace(/\[(.*?)\]\((.*?)\)/gim,'<a href="$2">$1</a>'),e=e.replace(/^\s*\n\* (.*)/gim,`<ul>
<li>$1</li>
</ul>`),e=e.replace(/^\* (.*)/gim,"<li>$1</li>"),e=e.replace(/^\s*\n\d\. (.*)/gim,`<ol>
<li>$1</li>
</ol>`),e=e.replace(/^\d\. (.*)/gim,"<li>$1</li>"),e=e.replace(/^\> (.*)/gim,"<blockquote>$1</blockquote>"),e=e.replace(/\n$/gim,"<br />"),e.trim()}function N(){let e=document.querySelectorAll("[markdown]");for(let t=0;t<e.length;t++){let n=e[t];to_convert=n.innerHTML,n.classList.add("no-tailwind"),converted=b(to_convert),n.innerHTML=converted}}var L=o(()=>{document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[include-md]").forEach(function(t){let n=t.getAttribute("include-md");if(n){let i=new XMLHttpRequest;i.onreadystatechange=function(){this.readyState==4&&(this.status==200&&(t.innerHTML=b(this.responseText),t.classList.add("no-tailwind")),this.status==404&&(t.innerHTML="Page not found."))},i.open("GET",n,!0),i.send()}})})});var I=v((C,H)=>{g();$();L();window.Component=a;var y="{",T="}",h=class{constructor(){this.className="",this.name="",this.script=null,this.html=null}createScript(){if(document.querySelector(`[rapid-script="${this.getClassName()}"]`)==null){let t=document.createElement("script");t.setAttribute("rapid-script",this.getClassName()),t.textContent=this.script.innerHTML,document.body.appendChild(t)}}getClassName(t){if(this.script==null)return null;let n=this.script.innerHTML.match(/class\s+([^\s{]+)/);return n&&n.length>1?n[1]:null}},m=class{constructor(){this.instanceName,this.defintion,this.props,this.html}replaceProps(){this.html=this.html.replaceAll(`${y}children${T}`,this.defintion.innerHTML);for(let i of Object.entries(this.props)){let l=i[0],r=i[1];if(l==="child-id"){var t=document.createElement("div");t.innerHTML=this.html;var n=t.firstElementChild;t.setAttribute("child-id",r),this.html=t.outerHTML}else this.html=this.html.replaceAll(`${y}${l}${T}`,r)}}replaceSelf(){this.html=this.html.replaceAll("self",this.instanceName)}replaceChildId(){var t=new DOMParser,n=t.parseFromString(this.html,"text/html"),i=n.querySelectorAll("[child-id]");for(let l=0;l<i.length;l++){let r=i[l].getAttribute("child-id");r.includes("RAPID")||i[l].setAttribute("child-id","RAPIDself"+r)}this.html=n.body.innerHTML}setInstance(){if(this.instanceName=f(10),this.html!=null){var t=new DOMParser,n=t.parseFromString(this.html,"text/html");n.body.firstElementChild.setAttribute("instance",this.instanceName),this.html=n.body.innerHTML}}};window.replaceComponents=()=>{let e=document.getElementsByTagName("template"),t=new Object;for(let i=e.length-1;i>=0;i--){let l=new h;l.name=e[i].getAttribute("rapid-name"),l.script=e[i].content.querySelector("script"),l.script!==null?(l.html=e[i].innerHTML.replace(l.script.outerHTML,""),l.createScript()):l.html=e[i].innerHTML,t[l.name]=l}console.log(t);let n=[];for(let[i,l]of Object.entries(t)){let r=document.getElementsByTagName(i);console.log(r);for(let c=0;c<r.length;c++){let s=new m;s.defintion=r[c];let d=document.createElement("div");d.innerHTML=l.html,s.html=d.outerHTML,s.className=l.getClassName(),s.props=Array.from(r[c].attributes).reduce((p,u)=>(p[u.name]=u.value,p),{}),s.setInstance(),s.replaceChildId(),s.replaceProps(),s.replaceSelf(),r[c].outerHTML=s.html,n.push(s),c--}}for(let i=n.length-1;i>=0;i--){let l=n[i];if(l.className!=null){let r=`let ${l.instanceName} = new ${l.className}();`;r+=`${l.instanceName}.self = '${l.instanceName}';`,r+=`${l.instanceName}.props = ${JSON.stringify(l.props)};`,r+=`${l.instanceName}.onComponentLoad();`;let c=document.createElement("script");c.textContent=r,document.body.appendChild(c)}}};function A(){let e=document.querySelector("[include-html]");if(e===null)return null;let t=e.getAttribute("include-html");t&&fetch(t).then(n=>{if(!n.ok)throw new Error("Network response was not ok");return n.text()}).then(n=>{e.outerHTML=n,replaceComponents(),A()}).catch(n=>{e.innerHTML="Content not found."})}window.rapidRefresh=()=>{replaceComponents()};async function E(){A(),replaceComponents(),N(),M()}window.getInstanceById=e=>{let t=document.getElementById(e);return getInstance(t)};window.getInstance=element=>{if(console.log(element),element.getAttribute("instance")){let instanceName=element.getAttribute("instance");if(instanceName===null&&(instanceName=element.firstElementChild.getAttribute("instance"),instanceName===null))return null;let instance=eval(`${instanceName}`);return instance}else return getInstance(element.parentElement)};window.onload=E()});I();})();
//# sourceMappingURL=RapidElements.js.map
